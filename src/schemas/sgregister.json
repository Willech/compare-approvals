{
    "openapi": "3.0.0",
    "servers": [
        {
            "url": "https://sgregister.dibk.no/api",
            "description": "Server som tilbyr API for informasjon om sentralt godkjente foretak"
        }
    ],
    "info": {
        "title": "SGregister - Register over foretak med sentral godkjenning",
        "description": "I tillegg til SGregister som en nettside for sÃ¸k etter foretak med sentral godkjenning har vi ogsÃ¥ etablert et REST-API som kan brukes til Ã¥ raskt slÃ¥ opp og hente inn data fra registeret. MÃ¥lgruppen for dette APIet er datasystemer og nettsider som Ã¸nsker Ã¥ sjekke om et foretak har sentral godkjenning. \n\n APIet er Ã¥pent og gratis tilgjengelig for alle som Ã¸nsker Ã¥ bruke det. Systemeiere trenger ikke Ã¥ registrere sin bruk hos Direktoratet for byggkvalitet. Vi oppfordrer dog brukere til Ã¥ ikke lagre data fra registeret permanent, men heller bruke APIet til direkte eller regelmessige oppslag.\n\n Oppdatert dokumentasjon foreligger pÃ¥ https://sgregister.dibk.no/apidocs/index.html",
        "contact": {
            "name": "Direktoratet for byggkvalitet",
            "url": "https://dibk.no/sentral-godkjenning/",
            "email": "post@dibk.no"
        },
        "license": {
            "name": "Norsk Lisens for Offentlige Data",
            "url": "https://data.norge.no/nlod/no/"
        },
        "version": "1.2"
    },
    "externalDocs": {
        "url": "https://sgregister.dibk.no/apidocs/index.html",
        "description": "Oppdatert dokumentasjon med eksempler er tilgjengelig pÃ¥ SGregister-tjeneren."
    },
    "tags": [
        {
            "name": "public",
            "description": "Operations available to the public"
        }
    ],
    "paths": {
        "/enterprises/{orgid}.{format}": {
            "get": {
                "tags": [
                    "public"
                ],
                "description": "Returns information about the approval, if the organisation has an approval. If omitted, the \".{format}\" part of the path is interpreted as \".json\".",
                "parameters": [
                    {
                        "name": "orgid",
                        "in": "path",
                        "description": "Organization's official Tax ID",
                        "required": true,
                        "style": "simple",
                        "explode": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "Accept",
                        "in": "header",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "application/vnd.sgpub.v1"
                        },
                        "description": "Angir hvilken versjon av APIet som benyttes. Standardverdien er 'application/vnd.sgpub.v1', som ogsÃ¥ brukes nÃ¥r header ikke oppgis. For sikkerhets skyld anbefaler vi at denne headeren benyttes."
                    },
                    {
                        "name": "format",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "default": "json"
                        },
                        "description": "Angir hvilket format resultatet skal leveres pÃ¥. Man kan velge mellom 'json' (standard) eller 'xml'."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns the object containing the organization data in the format requested",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/dibk_sgdata"
                                }
                            },
                            "application/xml": {
                                "schema": {
                                    "$ref": "#/components/schemas/dibk_sgdata"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Returned if the organization provided has no approval"
                    }
                }
            }
        },
        "/enterprises.{format}": {
            "get": {
                "summary": "",
                "description": "Returns an array over ALL the approved organisations. The result size will vary by format, but will exceed 30 MB for JSON and 80 MB for XML. It is strongly suggested to use the header 'Accept-Encoding: gzip' in the request.",
                "parameters": [
                    {
                        "name": "format",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "default": "json"
                        },
                        "description": "Specifies the response format. 'json' (default) or 'xml'."
                    },
                    {
                        "name": "Accept",
                        "in": "header",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "default": "application/vnd.sgpub.v2"
                        },
                        "description": "This header must be set to 'application/vnd.sgpub.v2' in order to use this operation."
                    },
                    {
                        "name": "Accept-encoding",
                        "in": "header",
                        "required": false,
                        "schema": {
                            "type": "string"
                        },
                        "description": "It is highly recommended to set this header to 'gzip' or 'gzip,deflate', in order to compress the response data.",
                        "allowEmptyValue": true
                    }
                ],
                "operationId": "",
                "responses": {
                    "default": {
                        "description": "Default response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                    	"$ref": "#/components/schemas/enterprise_v2"
                                    }
                                }
                            },
                            "application/xml": {
                                "schema": {
                                	"type": "array",
                                	"items": {
                                		"$ref": "#/components/schemas/enterprise_v2"
                                	}
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "public"
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "dibk_sgdata": {
                "type": "object",
                "properties": {
                    "dibk-sgdata": {
                        "type": "object",
                        "properties": {
                            "status": {
                                "$ref": "#/components/schemas/status"
                            },
                            "enterprise": {
                            	"$ref": "#/components/schemas/enterprise_v1"
                            },
                            "valid_approval_areas": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/approval_area"
                                }
                            }
                        }
                    }
                }
            },
            "enterprise_v1": {
				"type": "object",
				"properties": {
					"organizational_number": {
						"type": "string",
						"description": "The organizational number is the unique Tax ID for the organization in the country it operates in. For Norwegian organizations this is the registration number from BRREG."
					},
					"name": {
						"type": "string",
						"description": "The organization's official name"
					},
					"www": {
						"type": "string",
						"description": "URL to the company web site"
					},
					"phone": {
						"type": "string",
						"description": "The company phone number"
					},
					"email": {
						"type": "string",
						"description": "The company email address"
					},
					"businessaddress": {
						"$ref": "#/components/schemas/address"
					},
					"postaladdress": {
						"$ref": "#/components/schemas/address"
					}
				}
            },
        	"enterprise_v2": {
				"type": "object",
				"properties": {
					"organizational_number": {
						"type": "string",
						"description": "The organizational number is the unique Tax ID for the organization in the country it operates in. For Norwegian organizations this is the registration number from BRREG."
					},
					"name": {
						"type": "string",
						"description": "The organization's official name"
					},
					"www": {
						"type": "string",
						"description": "URL to the company web site"
					},
					"phone": {
						"type": "string",
						"description": "The company phone number"
					},
					"email": {
						"type": "string",
						"description": "The company email address"
					},
					"businessaddress": {
						"$ref": "#/components/schemas/address"
					},
					"postaladdress": {
						"$ref": "#/components/schemas/address"
					},
					"status": {
						"$ref": "#/components/schemas/status"
					},
					"valid_approval_areas": {
						"type": "array",
						"items": {
							"$ref": "#/components/schemas/approval_area"
						}
					}
				}
        	},
        	
        	"status": {
        		"type": "object",
        		"properties": {
        			"status": {
        				"type": "object",
        				"properties": {
                            "approved": {
                                "type": "string",
                                "description": "Contains 'true' if the organisation is approved"
                            },
                            "approval_period_to": {
                                "type": "string",
                                "format": "date"
                            },
                            "approval_certificate": {
                                "type": "string",
                                "description": "URL to download or view the approval certificate"
                            }
        				}
        			}
        		}
        	},
            "approval_area": {
                "type": "object",
                "properties": {
                    "funtion": {
                        "type": "string",
                        "description": "The approval area's defined function, as text"
                    },
                    "function_xml": {
                        "type": "string",
                        "description": "The approval area's function as XML reference"
                    },
                    "subject_area": {
                        "type": "string",
                        "description": "The approval area's subject area, as text"
                    },
                    "subject_area_xml": {
                        "type": "string",
                        "description": "The approval area's subject area, as XML reference"
                    },
                    "pbl": {
                        "type": "string",
                        "description": "The approval area's reference to the building law (Pbl)"
                    },
                    "pbl_xml": {
                        "type": "string",
                        "description": "The approval area's reference to the building law (Pbl), as XML reference"
                    },
                    "grade": {
                        "type": "string",
                        "description": "The approval area's grade"
                    }
                },
                "description": "Object containing info about an approval area"
            },
            "address": {
                "type": "object",
                "properties": {
                    "line_1": {
                        "type": "string"
                    },
                    "line_2": {
                        "type": "string"
                    },
                    "line_3": {
                        "type": "string"
                    },
                    "line_4": {
                        "type": "string"
                    },
                    "postal_code": {
                        "type": "string"
                    },
                    "postal_town": {
                        "type": "string"
                    },
                    "country": {
                        "type": "string",
                        "description": "Abbreviated form for the country, ie. 'NO' for Norway"
                    }
                },
                "description": "Standardized address object used for businessaddress and postal_address"
            }
        },
        "links": {},
        "callbacks": {}
    },
    "security": []
}